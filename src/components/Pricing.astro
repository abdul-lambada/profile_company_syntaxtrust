---
const plans = [
    {
        name: "Starter",
        price: "499rb",
        desc: "Cocok untuk sekolah kecil atau PAUD",
        features: [
            "Hingga 200 Siswa",
            "Manajemen SPP Dasar",
            "Cetak Kwitansi A4",
            "Export Excel & PDF",
            "Backup Database Manual",
        ],
        isPopular: false,
        color: "slate",
    },
    {
        name: "Professional",
        price: "899rb",
        desc: "Paling populer untuk SMP/SMA/SMK",
        features: [
            "Siswa Tak Terbatas",
            "WhatsApp Auto-Reminder",
            "Cetak Struk Thermal",
            "Multi-Role Access Control",
            "Audit Log Lengkap",
            "Support 24/7",
        ],
        isPopular: true,
        color: "emerald",
    },
    {
        name: "Enterprise",
        price: "Custom",
        desc: "Solusi kustom untuk grup yayasan besar",
        features: [
            "Multi-Sekolah Integrasi",
            "API Kustom",
            "White-label Branding",
            "Server Dedicated",
            "Maintenance Prioritas",
        ],
        isPopular: false,
        color: "slate",
    },
];
---

<section id="pricing" class="py-24 bg-slate-50 relative overflow-hidden">
    <div class="max-w-7xl mx-auto px-6 relative z-10">
        <div class="text-center mb-16 flex flex-col items-center">
            <span
                class="text-emerald-600 font-bold text-sm uppercase tracking-widest bg-emerald-100 px-4 py-1 rounded-full mb-4 inline-block"
                >Harga & Paket</span
            >
            <h2 class="text-4xl font-bold text-slate-900 mb-4 max-w-2xl">
                Investasi Terbaik untuk Sekolah Digital
            </h2>
            <p class="text-slate-600 max-w-xl text-lg">
                Pilih paket yang sesuai dengan skala sekolah Anda. Transparan
                tanpa ada biaya tersembunyi.
            </p>
        </div>

        <div class="grid lg:grid-cols-4 gap-8 items-start">
            <!-- Pay-As-You-Grow Plan -->
            <div
                class="relative group p-8 rounded-[40px] bg-white border border-emerald-100 shadow-xl lg:col-span-1 hover:-translate-y-2 transition-all duration-500"
            >
                <div class="mb-8">
                    <div
                        class="w-12 h-12 bg-emerald-50 text-emerald-600 rounded-2xl flex items-center justify-center mb-4"
                    >
                        <svg
                            xmlns="http://www.w3.org/2000/svg"
                            class="w-6 h-6"
                            fill="none"
                            viewBox="0 0 24 24"
                            stroke="currentColor"
                        >
                            <path
                                stroke-linecap="round"
                                stroke-linejoin="round"
                                stroke-width="2"
                                d="M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"></path>
                        </svg>
                    </div>
                    <h3 class="text-xl font-bold text-slate-900 mb-2">
                        Pay-As-You-Grow
                    </h3>
                    <p class="text-slate-600 text-sm leading-relaxed mb-6">
                        Bayar adil sesuai jumlah siswa aktif sekolah Anda.
                    </p>

                    <div
                        class="bg-slate-50 rounded-3xl p-6 border border-slate-100 mb-6"
                    >
                        <div class="flex items-center justify-between mb-2">
                            <span
                                class="text-xs font-bold text-slate-400 uppercase"
                                >Jumlah Siswa</span
                            >
                            <span
                                id="student-count"
                                class="text-lg font-black text-emerald-600"
                                >100</span
                            >
                        </div>
                        <input
                            type="range"
                            id="student-slider"
                            min="50"
                            max="1000"
                            step="10"
                            value="100"
                            class="w-full h-2 bg-emerald-100 rounded-lg appearance-none cursor-pointer accent-emerald-600"
                        />
                        <div class="mt-4 pt-4 border-t border-slate-200/50">
                            <span class="text-xs text-slate-400 block mb-1"
                                >Estimasi Per Bulan:</span
                            >
                            <span
                                id="estimated-price"
                                class="text-2xl font-black text-slate-900"
                                >Rp 250rb</span
                            >
                        </div>
                    </div>
                </div>

                <ul class="space-y-4 mb-10 text-left">
                    <li
                        class="flex items-center gap-3 text-sm font-medium text-slate-600"
                    >
                        <svg
                            xmlns="http://www.w3.org/2000/svg"
                            class="w-4 h-4 text-emerald-500"
                            fill="none"
                            viewBox="0 0 24 24"
                            stroke="currentColor"
                            stroke-width="3"
                            ><path
                                stroke-linecap="round"
                                stroke-linejoin="round"
                                d="M5 13l4 4L19 7"></path></svg
                        >
                        Rp 2.500 / siswa aktif
                    </li>
                    <li
                        class="flex items-center gap-3 text-sm font-medium text-slate-600 text-left"
                    >
                        <svg
                            xmlns="http://www.w3.org/2000/svg"
                            class="w-4 h-4 text-emerald-500"
                            fill="none"
                            viewBox="0 0 24 24"
                            stroke="currentColor"
                            stroke-width="3"
                            ><path
                                stroke-linecap="round"
                                stroke-linejoin="round"
                                d="M5 13l4 4L19 7"></path></svg
                        >
                        Fitur Professional Lengkap
                    </li>
                </ul>

                <button
                    class="w-full py-4 bg-emerald-600 text-white font-bold rounded-2xl hover:bg-emerald-700 shadow-xl shadow-emerald-500/20 active:scale-95 transition-all"
                >
                    Mulai Uji Coba
                </button>
            </div>

            {
                plans.map((plan) => (
                    <div
                        class={`relative group p-8 rounded-[40px] bg-white border transition-all duration-500 hover:-translate-y-2 ${plan.isPopular ? "border-emerald-500 shadow-2xl shadow-emerald-500/10 scale-105 z-10" : "border-slate-100 shadow-xl"}`}
                    >
                        {plan.isPopular && (
                            <div class="absolute -top-5 left-1/2 -translate-x-1/2 px-4 py-1.5 bg-emerald-500 text-white text-xs font-bold rounded-full uppercase tracking-widest shadow-lg shadow-emerald-500/30">
                                Paling Direkomendasikan
                            </div>
                        )}

                        <div class="mb-8">
                            <h3
                                class={`text-xl font-bold mb-2 ${plan.isPopular ? "text-emerald-600" : "text-slate-900"}`}
                            >
                                {plan.name}
                            </h3>
                            <div class="flex items-baseline gap-1 mb-4">
                                <span class="text-4xl font-black text-slate-900">
                                    {plan.price}
                                </span>
                                {plan.price !== "Custom" && (
                                    <span class="text-slate-400 font-medium text-sm">
                                        /bulan
                                    </span>
                                )}
                            </div>
                            <p class="text-slate-600 text-sm leading-relaxed">
                                {plan.desc}
                            </p>
                        </div>

                        <div class="space-y-4 mb-10 text-left">
                            {plan.features.map((feat) => (
                                <div class="flex items-start gap-3">
                                    <div
                                        class={`mt-1 p-0.5 rounded-full ${plan.isPopular ? "bg-emerald-100 text-emerald-600" : "bg-slate-100 text-slate-400"}`}
                                    >
                                        <svg
                                            xmlns="http://www.w3.org/2000/svg"
                                            class="w-3.5 h-3.5"
                                            viewBox="0 0 24 24"
                                            fill="none"
                                            stroke="currentColor"
                                            stroke-width="4"
                                            stroke-linecap="round"
                                            stroke-linejoin="round"
                                        >
                                            <polyline points="20 6 9 17 4 12" />
                                        </svg>
                                    </div>
                                    <span class="text-sm font-medium text-slate-600 text-left">
                                        {feat}
                                    </span>
                                </div>
                            ))}
                        </div>

                        <button
                            class={`w-full py-4 rounded-2xl font-bold transition-all active:scale-95 ${plan.isPopular ? "bg-emerald-600 text-white hover:bg-emerald-700 shadow-xl shadow-emerald-500/20" : "bg-slate-100 text-slate-600 hover:bg-slate-200"}`}
                        >
                            Pilih Paket {plan.name}
                        </button>
                    </div>
                ))
            }
        </div>

        <div
            class="mt-16 p-8 rounded-3xl bg-white border border-slate-100 shadow-sm flex flex-col md:flex-row items-center justify-between gap-8 max-w-5xl mx-auto"
        >
            <div class="flex items-center gap-6 text-left">
                <div
                    class="w-16 h-16 bg-indigo-50 text-indigo-600 rounded-2xl flex items-center justify-center shrink-0"
                >
                    <svg
                        xmlns="http://www.w3.org/2000/svg"
                        class="w-8 h-8"
                        fill="none"
                        viewBox="0 0 24 24"
                        stroke="currentColor"
                    >
                        <path
                            stroke-linecap="round"
                            stroke-linejoin="round"
                            stroke-width="2"
                            d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"
                        ></path>
                    </svg>
                </div>
                <div>
                    <h4 class="font-bold text-slate-900 text-lg">
                        Punya lebih dari 10 sekolah?
                    </h4>
                    <p class="text-slate-500 text-sm">
                        Dapatkan harga khusus yayasan dan integrasi dashboard
                        pusat.
                    </p>
                </div>
            </div>
            <button
                class="px-8 py-4 bg-slate-900 text-white font-bold rounded-2xl hover:bg-slate-800 transition-all active:scale-95 whitespace-nowrap"
            >
                Hubungi Tim Sales
            </button>
        </div>
    </div>
</section>

<script>
    const slider = document.getElementById(
        "student-slider",
    ) as HTMLInputElement;
    const countText = document.getElementById("student-count");
    const priceText = document.getElementById("estimated-price");

    slider?.addEventListener("input", (e) => {
        const value = parseInt((e.target as HTMLInputElement).value);
        const price = value * 2500;

        if (countText) countText.textContent = value.toString();
        if (priceText) {
            priceText.textContent = `Rp ${price / 1000}rb`;
        }
    });
</script>
